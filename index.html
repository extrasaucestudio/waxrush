<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1.0">
    <title>Waxrush.com - </title>
    <link rel="preload" href="files/Site.min.css" as="style">
    <link rel="reload" href="files/style.min.css" as="style">
        <link rel="preload" href="files/sso-theme.min.css" as="style">
    <link href="files/Site.min.css" rel="stylesheet" type="text/css">
    <link href="files/style.min.css" rel="stylesheet" type="text/css">
        <link href="files/sso-theme.min.css" rel="stylesheet" type="text/css">
        <script src='waxjs.js'></script>
        <script type="text/javascript" src="../../codebase/suite.js?v=7.3.3"></script>
		<link rel="stylesheet" href="../../codebase/suite.css?v=7.3.3">
		<link rel="stylesheet" href="../common/index.css?v=7.3.3">



<script async src="https://www.googletagmanager.com/gtag/js?id=G-xxxx"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-xxxx');
</script>

</head>
<body style="background-image: url('files/bg3-plain.png');" align="center">
<center>
    <div id="container" width="75px">
        <header>
<p>WaxRush.com - Wax NFT Distributor</p>
        </header>
        <section id="main" align="center">
          

          <div>
          <tr>
            <td>
              <div>
<button id="login" onclick=login() >WAX Login</button>
              </div>
            </td>
          </tr>

          <tr>
<div><td><h2 id="current"></h2></td></div>
          </tr>
</div>

          
          <br><br>
          <hr>
          <label>updater:</label><input id="updater"><br><br>
          <label>message:</label><input id="message"><br><br>
          <label>fail:</label><input type="checkbox" id="fail" value="fail"><br><br>
          <button id="sign" onclick=sign() >Sign transaction</button><br><br>
          <label>Current Message</label><h3 id="current"></h3><br><br>
          <hr>
          <label>Transaction Results</label>
          <h2 id="response"></h2>
          
          <script>
            const wax = new waxjs.WaxJS({
              rpcEndpoint: 'https://wax.greymass.com'
            });
          
            async function login() {
              try {
                const userAccount = await wax.login();
                document.getElementById('updater').value = userAccount;
                await getCurrentMessage();
              } catch(e) {
                document.getElementById('response').append(e.message);
              }
            }
          
            async function sign() {
              if(!wax.api) {
                return document.getElementById('response').append('* Login first *');
              }
          
              const updater = document.getElementById('updater').value;
              const message = document.getElementById('message').value;
              const fail = document.getElementById('fail').checked;
          
              try {
                const result = await wax.api.transact({
                  actions: [{
                    account: 'test.wax',
                    name: 'update',
                    authorization: [{
                      actor: wax.userAccount,
                      permission: 'active',
                    }],
                    data: {
                      updater,
                      message,
                      fail,
                    },
                  }]
                }, {
                  blocksBehind: 3,
                  expireSeconds: 30
                });
                document.getElementById('response').append(JSON.stringify(result));
                await new Promise(resolve => setTimeout(resolve, 1000));
                await getCurrentMessage();
              } catch(e) {
                document.getElementById('response').append(e.message);
              }
            }
          
            async function getCurrentMessage() {
              const res = await wax.rpc.get_table_rows({
                json: true,
                code: 'test.wax',
                scope: 'test.wax',
                table: 'messages',
                lower_bound: wax.userAccount,
                upper_bound: wax.userAccount,
              });
          
              const message = res.rows[0] ? res.rows[0].message : `${wax.userAccount}`;
              document.getElementById('current').textContent = message;
            }
          
            // set a random value to the initial message value
            document.getElementById('message').value = Math.random().toString(36).substring(2);
          
          </script>
 














<hr><br><br>

<img src="files/wax.svg" alt="WAX" width="75px" height="75px">

<hr><br><br>

<header class="dhx_sample-header">
    <div class="dhx_sample-header__main">
        <nav class="dhx_sample-header__breadcrumbs">
            <ul class="dhx_sample-header-breadcrumbs">
                        <li class="dhx_sample-header-breadcrumbs__item">
                            <a href="../index.html" class="dhx_sample-header-breadcrumbs__link">FreeCityGame</a>
                        </li>
                    </ul>
        </nav>
        <h1 class="dhx_sample-header__title">
            <div class="dhx_sample-header__content">
            </h1>

<tr>
<td>Menu</td>
</tr>
<tr>
<td><a href="#" class="dhx_sample-header-breadcrumbs__link" >Menu</a></td>
</tr>
<tr>
<td>
    <section class="dhx_sample-controls">
        <button id="show" class="dhx_sample-btn dhx_sample-btn--flat">Show popup</button>
    </section>
</td>
</tr>

            </div>

            
        
    </div>
</header>

<script>
    const popup = new dhx.Popup({
css: "dhx_widget--bordered"
});

    popup.attachHTML("<div style='padding: 0px; text-align: center'> <iframe src='dhtmlx.html' title='' height='520' width='325' ></iframe></div>");
document.querySelector("#show").addEventListener("click", function () {
popup.show("show");
    });

    const dhxWindow = new dhx.Window({
width: 325,
height: 520,
title: "Window"
});

const list = new dhx.List(null, {
css: "dhx_widget--bordered"
});

list.data.parse(dataset);

dhxWindow.attach(list)
dhxWindow.show();
</script>




</section>
        </section>
       
        <footer align="center">
            <br><br>
            Â© WaRush.com
        </footer>
    </div>
    </center>
</body></html>