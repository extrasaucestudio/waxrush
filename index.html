<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1.0">
    <title>Waxrush.com - Random WAX NFT Distributor</title>
    <link rel="preload" href="files/Site.min.css" as="style">
    <link rel="reload" href="files/style.min.css" as="style">
        <link rel="preload" href="files/sso-theme.min.css" as="style">
    <link href="files/Site.min.css" rel="stylesheet" type="text/css">
    <link href="files/style.min.css" rel="stylesheet" type="text/css">
        <link href="files/sso-theme.min.css" rel="stylesheet" type="text/css">
        <script src='waxjs.js'></script>
        <script type="text/javascript" src="../../codebase/suite.js?v=7.3.3"></script>
		<link rel="stylesheet" href="../../codebase/suite.css?v=7.3.3">
		<link rel="stylesheet" href="../common/index.css?v=7.3.3">



<script async src="https://www.googletagmanager.com/gtag/js?id=G-YJHTL314PP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YJHTL314PP');
</script>
<script>
  const affiliate_wallet = `xxxxx.wam`;
</script>
<script>
  

  HTML CSS JS 

Result
Skip Results Iframe

EDIT ON

function getAllUrlParams(url) {
var queryString = url ? url.split('?')[1] : window.location.search.slice(1);
var obj = {};

if (queryString) {
queryString = queryString.split('#')[0];
var arr = queryString.split('&');

for (var i = 0; i < arr.length; i++) {
  var a = arr[i].split('=');
  var paramName = a[0];
  var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

  paramName = paramName.toLowerCase();
  if (typeof paramValue === 'string') paramValue = paramValue.toLowerCase();

  if (paramName.match(/\[(\d+)?\]$/)) {
    var key = paramName.replace(/\[(\d+)?\]/, '');
    if (!obj[key]) obj[key] = [];

    if (paramName.match(/\[\d+\]$/)) {
      var index = /\[(\d+)\]/.exec(paramName)[1];
      obj[key][index] = paramValue;
    } else {
      obj[key].push(paramValue);
    }
  } else {
    if (!obj[paramName]) {
      obj[paramName] = paramValue;
    } else if (obj[paramName] && typeof obj[paramName] === 'string'){
      obj[paramName] = [obj[paramName]];
      obj[paramName].push(paramValue);
    } else {
      obj[paramName].push(paramValue);
    }
  }
}
}

return obj;
}

var params = document.getElementById('params');
var results = document.getElementById('results');

document.querySelector('input').addEventListener('keyup', function() {
params.innerText = this.value;
results.innerText = JSON.stringify(getAllUrlParams("http://waxrush.com/?" + this.value), null, 2);
});

</script>
<style>
  body{
  padding: 10px;
}

input {
  width: 500px;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

p {
  font-size: 18px;
  line-height: 28px;
  font-family: Georgia,serif;
  color: #333;
}
</style>
</head>
<body style="background-image: url('files/bg3-plain-4.png');" align="center">
<center>
    <div id="container">
<img src="files/waxrush.png" alt="NFT Distributor" width="20%"><br>
<p>Random WAX NFT Distributor</p>
<p id="affiliate_wallet"></p>
<p id="ref"></p>
<p><span id="params"></span></p>
<p><input placeholder="Enter URL params" /></p>jhgjh
<pre id="results">{}</pre>



        <script>
          document.write(affiliate_wallet);
          document.write(ref);

        </script>


<script>{
  "ggg": true
}</script>

          <details id="details-panel1">
            <summary>WAX LOGIN</summary>

            <section id="main">
            <p><img id="login" onclick=login() src="files/login.png" alt="NFT Distributor" width="30%"><br>
            <h2 id="current"></h2><h2 id="current2"></h2>1<h2 id="affiliate_wallet"></h2>2</p>

                    <img src="files/waxrush-nft.gif" alt="NFT Distributor" width="40%">
                    <br>
                    Random NFT distributor (1 WAX)

                    <label hidden="hidden">wallet:</label><input id="wallet" hidden="hidden"><br><br>

                    
                      <img id="sign" onclick=sign() src="files/insertyourcoin.png" alt="NFT Distributor" width="50%">
                    <br><br>
                    
                  
                    <h2 id="response"></h2>
                    

                    <script>
                      
                      
                      const wax = new waxjs.WaxJS({
                        rpcEndpoint: 'https://wax.greymass.com'
                      });
                    
                      async function login() {
                        try {
                          const userAccount = await wax.login();
                          document.getElementById('wallet').value = userAccount;

                          await getCurrentMessage();
                        } catch(e) {
                          document.getElementById('response').append(e.message);
                        }
                      }
                    
                      async function sign() {
                        if(!wax.api) {
                          return document.getElementById('response').append('* Login first *');
                        }
                    
                        const wallet = document.getElementById('wallet').value;
                        
                    
                        try {
                          const result = await wax.api.transact({
                            actions: [{
                              account: 'freecitygamx',
                              name: 'adduseraff',
                              authorization: [{
                                actor: wax.userAccount,
                                permission: 'active',
                              }],
                              data: {
                                wallet,
                                affiliate_wallet,
                              },
                            }]
                          }, {
                            blocksBehind: 3,
                            expireSeconds: 30
                          });
                          document.getElementById('response').append('* Done *');
                          document.getElementById('response').append('* You are Register *');

                          // document.createElement("<div id='myID'> my Text </div>");
                          // document.body.insertBefore(elem,document.body.childNodes[0]);

                          // document.getElementById('response').append(JSON.stringify(result));
                          // console.log(result); 
                          await new Promise(resolve => setTimeout(resolve, 1000));
                          await getCurrentMessage();
                        } catch(e) {
                          document.getElementById('response').append(e.message);
                        }
                      }
                    
                      async function getCurrentMessage() {
                        const res = await wax.rpc.get_table_rows({
                          json: true,
                          code: 'freecitygamx',
       scope: 'freecitygamx',
       table: 'users',
       lower_bound: 'waxioiopos1',
       upper_bound: 'waxioiopos1',
                        });
                    
                        
                        const message = res.rows[0] ? res.rows[0].message : `${wax.userAccount} ${affiliate_wallet}`;
                        document.getElementById('current').textContent = message;
                        

                        document.getElementById('current2').append = `${wax.userAccount}`;

                        // document.getElementById('current').textContent = ('<p>');
                        // document.getElementById('current').textContent = ('working');
                        // document.getElementById('current').textContent = ('</p>');
                        
                      }
                    
                      // set a random value to the initial message value
                      document.getElementById('message').value = Math.random().toString(36).substring(2);
                    
                    </script>

            </p>
            </section>
        </details>
      
        <img src="files/wax.svg" alt="WAX Login" width="50px" height="50px">

        <br><br><br>
          

<p id="show">Embed this tool$</p>
<script>
    const popup = new dhx.Popup({
css: "dhx_widget--bordered"
});

    popup.attachHTML("<div style='padding: 0px; text-align: center'> <iframe src='embed.html?ref=${affiliate_wallet}' title='' height='335' width='335' ></iframe></div>");
document.querySelector("#show").addEventListener("click", function () {
popup.show("show");
    });

    const dhxWindow = new dhx.Window({
width: 325,
height: 325,
title: "Window"
});

const list = new dhx.List(null, {
css: "dhx_widget--bordered"
});

list.data.parse(dataset);

dhxWindow.attach(list)
dhxWindow.show();
</script>

<br><br>

<!--
<script>
  var affiliatewallet = "affili.wam";
  document.write('<p>');
document.write('<%=var["affiliatewallet"] %>');
var affiliatewallet
document.write('</p>');
  </script>
-->


        <footer align="center">
            Â© WaxRush.com
        </footer>
    </div>
    </center>
</body></html>